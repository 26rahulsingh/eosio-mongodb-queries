# EOSIO MongoDB Queries

[![Build Status](https://travis-ci.org/EOS-Nation/eosio-mongodb-queries.svg?branch=master)](https://travis-ci.org/EOS-Nation/eosio-mongodb-queries)
[![npm version](https://badge.fury.io/js/eosio-mongodb-queries.svg)](https://badge.fury.io/js/eosio-mongodb-queries)
[![MIT licensed](https://img.shields.io/badge/license-MIT-blue.svg)](https://raw.githubusercontent.com/EOS-Nation/eosio-mongodb-queries/master/LICENSE)

Quickly and easily create complex MongoDB Queries for the EOSIO blockchain.

> This library is being actively maintained by [EOS Nation FTW](https://eosnation.io), show your support by voting for `eosnationftw` on the EOSIO mainnet.

## Install

**npm**

```bash
$ yarn add eosio-mongodb-queries
```

## Quickstart

```javascript
import { MongoClient } from "mongodb";
import { getActions } from "eosio-mongodb-queries";

(async () => {
    const client = await MongoClient.connect("mongodb://localhost:27017", { useNewUrlParser: true });

    // Parameters
    const actions = ["delegatebw", "undelegatebw"];
    const options = {
        accountName: "eosnationftw",
        accountNameKeys: ["data.from", "data.receiver"],
        gte_block_num: 0,
        lte_block_num: Infinity,
    };
    const results = await getActions(client, actions, options);
    console.log(await results.toArray());
})()
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [getActions](#getactions)
    -   [Parameters](#parameters)
    -   [Examples](#examples)

### getActions

Get Account Actions

#### Parameters

-   `client` **MongoClient** MongoDB Client
-   `filterActions` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>** Filter by actions names
-   `options` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Optional Parameters (optional, default `{}`)
    -   `options.accountName` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)?** Account Name (must also include "options.accountNameKeys")
    -   `options.accountNameKeys` **[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)>?** Filter accountName by specific keys
    -   `options.lte_block_num` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** Less-than or equal (&lt;=) the Reference Block Number
    -   `options.gte_block_num` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)?** Greater-than or equal (>=) the Head Block Number

#### Examples

```javascript
const actions = ["delegatebw", "undelegatebw"];
const options = {
    accountName: "eosnationftw",
    accountNameKeys: ["data.from", "data.receiver"],
    gte_block_num: 0,
    lte_block_num: Infinity,
};
const results = await getActions(client, actions, options);
console.log(await results.toArray());
```

Returns **AggregationCursor** MongoDB Aggregation Cursor
